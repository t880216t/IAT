(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[22],{"+0IA":function(e,t,a){"use strict";var n=a("TqRt"),r=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var s=n(a("bx4M"));a("g9YV");var u=n(a("wCAj"));a("+L6B");var l=n(a("2/Rp"));a("Pwec");var d=n(a("CtXQ"));a("P2fV");var i=n(a("NJEC"));a("/zsF");var c=n(a("PArb"));a("Awhp");var o,f,k,p=n(a("KrTs")),m=n(a("lwsE")),y=n(a("W8MJ")),h=n(a("a1gu")),v=n(a("Nsbk")),E=n(a("7W2i")),x=r(a("q1tI")),T=a("MuoO"),b=n(a("zHco")),g=(o=(0,T.connect)(function(e){var t=e.system,a=e.task,n=e.loading;return{system:t,task:a,loading:n.effects["task/queryTaskList"]}}),o((k=function(e){function t(){var e,a;(0,m.default)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return a=(0,h.default)(this,(e=(0,v.default)(t)).call.apply(e,[this].concat(r))),a.state={taskList:[]},a.queryTaskList=function(){var e=a.props.dispatch;e({type:"task/queryTaskList",payload:{taskType:1}}).then(function(){var e=a.props.task;a.setState({taskList:e.taskList})})},a.handleGoAdd=function(){var e=a.props.dispatch;e({type:"task/goAddPage"})},a.handleRunTask=function(e){var t=a.props.dispatch;t({type:"task/queryTaskExcute",payload:{id:e}}).then(function(){a.queryTaskList(),a.timer=setInterval(function(){return a.queryTaskList()},1e4)})},a.handleDelTask=function(e){var t=a.props.dispatch;t({type:"task/queryTaskDelete",payload:{id:e}}).then(function(){a.queryTaskList()})},a.renderStatus=function(e){var t;switch(e){case 1:t=x.default.createElement(p.default,{status:"processing",text:"\u83b7\u53d6\u4efb\u52a1\u4fe1\u606f"});break;case 2:t=x.default.createElement(p.default,{status:"processing",text:"\u751f\u6210\u6d4b\u8bd5\u811a\u672c"});break;case 3:t=x.default.createElement(p.default,{status:"success",text:"\u6267\u884c\u5b8c\u6210"});break;case 4:t=x.default.createElement(p.default,{status:"error",text:"\u83b7\u53d6\u4efb\u52a1\u4fe1\u606f\u5931\u8d25"});break;case 5:t=x.default.createElement(p.default,{status:"error",text:"\u6267\u884c\u4efb\u52a1\u5931\u8d25"});break;default:t=x.default.createElement(p.default,{status:"default",text:"\u65b0\u4efb\u52a1"})}return t},a}return(0,E.default)(t,e),(0,y.default)(t,[{key:"componentWillMount",value:function(){this.queryTaskList()}},{key:"componentWillUnMount",value:function(){clearInterval(this.timer)}},{key:"render",value:function(){var e=this,t=this.state.taskList,a=this.props.loading,n=[{title:"\u4efb\u52a1\u540d\u79f0",dataIndex:"name",key:"name",render:function(e,t){return x.default.createElement("a",{href:"#/task/immediate/detail?".concat(t.id),style:{color:"#2e86de",fontWeight:"bold"}},e)}},{title:"\u4efb\u52a1\u63cf\u8ff0",dataIndex:"taskDesc",key:"taskDesc"},{title:"\u65b0\u5efa\u4eba",dataIndex:"add_user",key:"add_user"},{title:"\u65b0\u5efa\u65f6\u95f4",dataIndex:"add_time",key:"add_time"},{title:"\u4efb\u52a1\u72b6\u6001",dataIndex:"status",key:"status",render:function(t,a){return e.renderStatus(a.status)}},{title:"\u64cd\u4f5c",dataIndex:"action",key:"action",render:function(t,a){return x.default.createElement("div",null,0===a.status&&x.default.createElement("a",{onClick:function(){return e.handleRunTask(a.id)}},"\u5f00\u59cb\u6267\u884c"),3===a.status&&x.default.createElement("a",{style:{color:"#2e86de",fontWeight:"bold"},href:"#/task/immediate/report?".concat(a.id)},"\u67e5\u770b\u62a5\u544a"),[0,3].indexOf(a.status)>-1&&x.default.createElement(c.default,{type:"vertical"}),!([1,2].indexOf(a.status)>-1)&&x.default.createElement(i.default,{title:"\u662f\u5426\u8981\u5220\u9664\u6b64\u884c\uff1f",onConfirm:function(){return e.handleDelTask(a.id)}},x.default.createElement("a",{style:{color:"#eb2f06"}},"\u5220\u9664")))}}];return x.default.createElement(b.default,null,x.default.createElement(s.default,{bordered:!1},x.default.createElement("div",{style:{marginBottom:16}},x.default.createElement(l.default,{type:"primary",onClick:function(){return e.handleGoAdd()}},x.default.createElement(d.default,{type:"plus"}),"\u65b0\u5efa\u4efb\u52a1")),x.default.createElement(u.default,{dataSource:t,columns:n,loading:a})))}}]),t}(x.PureComponent),f=k))||f),w=g;t.default=w}}]);